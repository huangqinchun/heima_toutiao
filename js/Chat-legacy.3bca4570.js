(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[370],{7109:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"小思同学"},on:{"click-left":function(t){return e.$router.back()}}}),n("div",{staticClass:"chat-list"},e._l(e.list,(function(t,r){return n("div",{key:r},["me"!==t.name?n("div",{staticClass:"chat-item left"},[n("van-image",{attrs:{fit:"cover",round:"",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),n("div",{staticClass:"chat-pao"},[e._v(e._s(t.msg))])],1):n("div",{staticClass:"chat-item right"},[n("div",{staticClass:"chat-pao"},[e._v(e._s(t.msg))]),n("van-image",{attrs:{fit:"cover",round:"",src:e.$store.state.userPhoto}})],1)])})),0),n("div",{staticClass:"reply-container van-hairline--top"},[n("van-field",{attrs:{placeholder:"说点什么..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendFn.apply(null,arguments)}},scopedSlots:e._u([{key:"button",fn:function(){return[n("span",{staticStyle:{"font-size":"12px",color:"#999"},on:{click:e.sendFn}},[e._v("提交")])]},proxy:!0}]),model:{value:e.word,callback:function(t){e.word=t},expression:"word"}})],1)],1)},o=[],i=(n(3210),n(4793)),s=(i.Manager,n(4224)),a={name:"Chat",data:function(){return{word:"",list:[{name:"xs",msg:"hi，你好！我是小思"},{name:"me",msg:"我是编程小王子"},{name:"xs",msg:"hi，你好！我是小思"},{name:"me",msg:"我是编程小王子"},{name:"xs",msg:"hi，你好！我是小思"},{name:"me",msg:"我是编程小王子"},{name:"xs",msg:"hi，你好！我是小思"},{name:"me",msg:"我是编程小王子"},{name:"xs",msg:"hi，你好！我是小思"},{name:"me",msg:"我是编程小王子"}],socket:null}},methods:{sendFn:function(){0!==this.word.trim().length&&(this.socket.emit("message",{msg:this.word,timestamp:(new Date).getTime()}),this.list.push({name:"me",msg:this.word}),this.$nextTick((function(){var e=document.querySelector(".chat-list>div:last-child");e.scrollIntoView({behavior:"smooth"})})),this.word="")}},created:function(){var e=this;this.socket=i("http://geek.itheima.net",{query:{token:(0,s.LP)()},transports:["websocket"]}),this.socket.on("connect",(function(){console.log("连接建立成功！")})),this.socket.on("message",(function(t){e.list.push({name:"xs",msg:t.msg}),e.$nextTick((function(){var e=document.querySelector(".chat-list>div:last-child");e.scrollIntoView({behavior:"smooth"})}))}))},destroyed:function(){this.socket.close(),this.socket=null}},c=a,u=n(1001),l=(0,u.Z)(c,r,o,!1,null,"4a5ebb00",null),f=l.exports},8457:function(e,t,n){"use strict";var r=n(7854),o=n(9974),i=n(6916),s=n(7908),a=n(3411),c=n(7659),u=n(4411),l=n(6244),f=n(6135),p=n(8554),h=n(1246),d=r.Array;e.exports=function(e){var t=s(e),n=u(this),r=arguments.length,y=r>1?arguments[1]:void 0,v=void 0!==y;v&&(y=o(y,r>2?arguments[2]:void 0));var m,g,k,b,w,C,x=h(t),_=0;if(!x||this==d&&c(x))for(m=l(t),g=n?new this(m):d(m);m>_;_++)C=v?y(t[_],_):t[_],f(g,_,C);else for(b=p(t,x),w=b.next,g=n?new this:[];!(k=i(w,b)).done;_++)C=v?a(b,y,[k.value,_],!0):k.value,f(g,_,C);return g.length=_,g}},3411:function(e,t,n){var r=n(9670),o=n(9212);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){o(e,"throw",s)}}},5032:function(e,t,n){var r=n(2597);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},1038:function(e,t,n){var r=n(2109),o=n(8457),i=n(7072),s=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:s},{from:o})},4819:function(e,t,n){var r=n(2109),o=n(6916),i=n(111),s=n(9670),a=n(5032),c=n(1236),u=n(9518);function l(e,t){var n,r,f=arguments.length<3?e:arguments[2];return s(e)===f?e[t]:(n=c.f(e,t),n?a(n)?n.value:void 0===n.get?void 0:o(n.get,f):i(r=u(e))?l(r,t,f):void 0)}r({target:"Reflect",stat:!0},{get:l})},2087:function(e,t,n){var r=n(9781),o=n(7045),i=n(7066),s=n(7293),a=RegExp.prototype,c=r&&s((function(){return"sy"!==Object.getOwnPropertyDescriptor(a,"flags").get.call({dotAll:!0,sticky:!0})}));c&&o(a,"flags",{configurable:!0,get:i})},3753:function(e,t,n){"use strict";var r=n(2109),o=n(6916);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})},4292:function(e){function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},7005:function(e,t,n){var r=n(4292);function o(e){if(Array.isArray(e))return r(e)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},159:function(e,t,n){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n(1703),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},172:function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(1703),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},378:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},5276:function(e,t,n){n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1703);var r=n(4950);function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(c)throw s}}}}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},7207:function(e,t,n){n(2419),n(1539),n(1299);var r=n(358),o=n(9803),i=n(6103);function s(e){var t=o();return function(){var n,o=r(e);if(t){var s=r(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return i(this,n)}}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},6760:function(e,t,n){n(1539),n(1299),n(4819),n(5003);var r=n(6338);function o(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.__esModule=!0,e.exports["default"]=e.exports):(e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports["default"]=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},358:function(e,t,n){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}n(489),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},5967:function(e,t,n){n(1703);var r=n(3919);function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},9803:function(e,t,n){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n(1539),n(1299),n(2419),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},8777:function(e,t,n){function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1038),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},9208:function(e,t,n){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n(1703),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},6103:function(e,t,n){n(1703);var r=n(7964)["default"],o=n(159);function i(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},3919:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},6338:function(e,t,n){var r=n(358);function o(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=r(e),null===e)break;return e}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},9848:function(e,t,n){var r=n(7005),o=n(8777),i=n(4950),s=n(9208);function a(e){return r(e)||o(e)||i(e)||s()}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},4950:function(e,t,n){n(7042),n(1539),n(8309),n(1038),n(8783),n(4916),n(7601);var r=n(4292);function o(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},7490:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},2508:function(e,t,n){n(1539),n(2472),n(8675),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(8264),function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var n,r,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),i=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),f[u++]=r<<2|o>>4,f[u++]=(15&o)<<4|i>>2,f[u++]=(3&i)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},2559:function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}n(561),n(7042),e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);r=0;for(var o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},3649:function(e,t,n){function r(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)}}function i(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}}function s(){var e;try{e=t.storage.getItem("debug")}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",BASE_URL:""}.DEBUG),e}function a(){try{return localStorage}catch(e){}}n(4916),n(4723),n(4603),n(8450),n(8386),n(9714),n(561),n(5306),n(8862),t.formatArgs=o,t.save=i,t.load=s,t.useColors=r,t.storage=a(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=n(7672)(t);var c=e.exports.formatters;c.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},7672:function(e,t,n){var r=n(9848)["default"];function o(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return o.colors[Math.abs(t)%o.colors.length]}function o(e){var t,n,r,s=null;function a(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(a.enabled){var i=a,s=Number(new Date),c=s-(t||s);i.diff=c,i.prev=t,i.curr=s,t=s,n[0]=o.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return"%";u++;var r=o.formatters[t];if("function"===typeof r){var s=n[u];e=r.call(i,s),n.splice(u,1),u--}return e})),o.formatArgs.call(i,n);var l=i.log||o.log;l.apply(i,n)}}return a.namespace=e,a.useColors=o.useColors(),a.color=o.selectColor(e),a.extend=i,a.destroy=o.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==s?s:(n!==o.namespaces&&(n=o.namespaces,r=o.enabled(e)),r)},set:function(e){s=e}}),"function"===typeof o.init&&o.init(a),a}function i(e,t){var n=o(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function s(e){var t;o.save(e),o.namespaces=e,o.names=[],o.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?o.skips.push(new RegExp("^"+e.slice(1)+"$")):o.names.push(new RegExp("^"+e+"$")))}function a(){var e=[].concat(r(o.names.map(u)),r(o.skips.map(u).map((function(e){return"-"+e})))).join(",");return o.enable(""),e}function c(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1}function u(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function l(e){return e instanceof Error?e.stack||e.message:e}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.debug=o,o.default=o,o.coerce=l,o.disable=a,o.enable=s,o.enabled=c,o.humanize=n(6920),o.destroy=f,Object.keys(e).forEach((function(t){o[t]=e[t]})),o.names=[],o.skips=[],o.formatters={},o.selectColor=t,o.enable(o.load()),o}n(1539),n(4747),n(7941),n(9653),n(4916),n(5306),n(561),n(6735),n(4603),n(8450),n(8386),n(9714),n(7042),n(9600),n(2222),n(1249),n(7601),n(1703),e.exports=o},3460:function(e){e.exports=function(){return"undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()}()},6940:function(e,t,n){var r=n(5796);e.exports=function(e,t){return new r(e,t)},e.exports.Socket=r,e.exports.protocol=r.protocol,e.exports.Transport=n(4576),e.exports.transports=n(1496),e.exports.parser=n(434)},5796:function(e,t,n){var r=n(7964)["default"],o=n(172)["default"],i=n(378)["default"],s=n(5967)["default"],a=n(7207)["default"];n(4916),n(5306),n(8309),n(1703),n(561);var c=n(1496),u=n(2559),l=n(3649)("engine.io-client:socket"),f=n(434),p=n(3519),h=n(4957),d=function(e){"use strict";s(n,e);var t=a(n);function n(e){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),i=t.call(this),e&&"object"===r(e)&&(s=e,e=null),e?(e=p(e),s.hostname=e.host,s.secure="https"===e.protocol||"wss"===e.protocol,s.port=e.port,e.query&&(s.query=e.query)):s.host&&(s.hostname=p(s.host).host),i.secure=null!=s.secure?s.secure:"undefined"!==typeof location&&"https:"===location.protocol,s.hostname&&!s.port&&(s.port=i.secure?"443":"80"),i.hostname=s.hostname||("undefined"!==typeof location?location.hostname:"localhost"),i.port=s.port||("undefined"!==typeof location&&location.port?location.port:i.secure?443:80),i.transports=s.transports||["polling","websocket"],i.readyState="",i.writeBuffer=[],i.prevBufferLen=0,i.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},s),i.opts.path=i.opts.path.replace(/\/$/,"")+"/","string"===typeof i.opts.query&&(i.opts.query=h.decode(i.opts.query)),i.id=null,i.upgrades=null,i.pingInterval=null,i.pingTimeout=null,i.pingTimeoutTimer=null,"function"===typeof addEventListener&&(addEventListener("beforeunload",(function(){i.transport&&(i.transport.removeAllListeners(),i.transport.close())}),!1),"localhost"!==i.hostname&&(i.offlineEventListener=function(){i.onClose("transport close")},addEventListener("offline",i.offlineEventListener,!1))),i.open(),i}return i(n,[{key:"createTransport",value:function(e){l('creating transport "%s"',e);var t=y(this.opts.query);t.EIO=f.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return l("options: %j",n),new c[e](n)}},{key:"open",value:function(){var e;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return l("error while creating transport: %s",r),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){l("setting transport %s",e.name);var t=this;this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){l('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,o=this;function i(){if(o.onlyBinaryUpgrades){var i=!this.supportsBinary&&o.transport.supportsBinary;r=r||i}r||(l('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!r)if("pong"===i.type&&"probe"===i.data){if(l('probe transport "%s" pong',e),o.upgrading=!0,o.emit("upgrading",t),!t)return;n.priorWebsocketSuccess="websocket"===t.name,l('pausing current transport "%s"',o.transport.name),o.transport.pause((function(){r||"closed"!==o.readyState&&(l("changing transport and sending upgrade packet"),p(),o.setTransport(t),t.send([{type:"upgrade"}]),o.emit("upgrade",t),t=null,o.upgrading=!1,o.flush())}))}else{l('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,o.emit("upgradeError",s)}})))}function s(){r||(r=!0,p(),t.close(),t=null)}function a(n){var r=new Error("probe error: "+n);r.transport=t.name,s(),l('probe transport "%s" failed because of error: %s',e,n),o.emit("upgradeError",r)}function c(){a("transport closed")}function u(){a("socket closed")}function f(e){t&&e.name!==t.name&&(l('"%s" works - aborting "%s"',e.name,t.name),s())}function p(){t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),o.removeListener("close",u),o.removeListener("upgrading",f)}n.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",f),t.open()}},{key:"onOpen",value:function(){if(l("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){l("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(l('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else l('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(l("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this;function t(){e.onClose("forced close"),l("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){l("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){l('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(u);function y(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}d.priorWebsocketSuccess=!1,d.protocol=f.protocol,e.exports=d},4576:function(e,t,n){var r=n(172)["default"],o=n(378)["default"],i=n(5967)["default"],s=n(7207)["default"];n(1703),n(2526),n(1817);var a=n(434),c=n(2559),u=n(3649)("engine.io-client:transport"),l=function(e){"use strict";i(n,e);var t=s(n);function n(e){var o;return r(this,n),o=t.call(this),o.opts=e,o.query=e.query,o.readyState="",o.socket=e.socket,o}return o(n,[{key:"onError",value:function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState?this.write(e):u("transport is not open, discarding packets")}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(e){var t=a.decodePacket(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){this.emit("packet",e)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}]),n}(c);e.exports=l},1496:function(e,t,n){n(1703);var r=n(3323),o=n(7839),i=n(2574),s=n(418);function a(e){var t,n=!1,s=!1,a=!1!==e.jsonp;if("undefined"!==typeof location){var c="https:"===location.protocol,u=location.port;u||(u=c?443:80),n=e.hostname!==location.hostname||u!==e.port,s=e.secure!==c}if(e.xdomain=n,e.xscheme=s,t=new r(e),"open"in t&&!e.forceJSONP)return new o(e);if(!a)throw new Error("JSONP disabled");return new i(e)}t.polling=a,t.websocket=s},2574:function(e,t,n){var r=n(172)["default"],o=n(378)["default"],i=n(159)["default"],s=n(6760)["default"],a=n(358)["default"],c=n(5967)["default"],u=n(7207)["default"];n(4916),n(7601),n(8309),n(5306);var l,f=n(121),p=n(3460),h=/\n/g,d=/\\n/g,y=function(e){"use strict";c(n,e);var t=u(n);function n(e){var o;r(this,n),o=t.call(this,e),o.query=o.query||{},l||(l=p.___eio=p.___eio||[]),o.index=l.length;var s=i(o);return l.push((function(e){s.onData(e)})),o.query.j=o.index,o}return o(n,[{key:"supportsBinary",get:function(){return!1}},{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s(a(n.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}},{key:"doWrite",value:function(e,t){var n,r=this;if(!this.form){var o=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function a(){c(),t()}function c(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(t){n=document.createElement("iframe"),n.name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),c(),e=e.replace(d,"\\\n"),this.area.value=e.replace(h,"\\n");try{this.form.submit()}catch(u){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&a()}:this.iframe.onload=a}}]),n}(f);e.exports=y},7839:function(e,t,n){var r=n(172)["default"],o=n(378)["default"],i=n(5967)["default"],s=n(7207)["default"],a=n(3323),c=n(121),u=n(2559),l=n(9756),f=l.pick,p=n(3460),h=n(3649)("engine.io-client:polling-xhr");function d(){}var y=function(){var e=new a({xdomain:!1});return null!=e.responseType}(),v=function(e){"use strict";i(n,e);var t=s(n);function n(e){var o;if(r(this,n),o=t.call(this,e),"undefined"!==typeof location){var i="https:"===location.protocol,s=location.port;s||(s=i?443:80),o.xd="undefined"!==typeof location&&e.hostname!==location.hostname||s!==e.port,o.xs=e.secure!==i}var a=e&&e.forceBase64;return o.supportsBinary=y&&!a,o}return o(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new m(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this.request({method:"POST",data:e}),r=this;n.on("success",t),n.on("error",(function(e){r.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){h("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),n}(c),m=function(e){"use strict";i(n,e);var t=s(n);function n(e,o){var i;return r(this,n),i=t.call(this),i.opts=o,i.method=o.method||"GET",i.uri=e,i.async=!1!==o.async,i.data=void 0!==o.data?o.data:null,i.create(),i}return o(n,[{key:"create",value:function(){var e=f(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var t=this.xhr=new a(e),r=this;try{h("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.opts.extraHeaders[o])}catch(i){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{t.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"===typeof t.status?t.status:0)}),0))},h("xhr data %s",this.data),t.send(this.data)}catch(i){return void setTimeout((function(){r.onError(i)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"hasXDR",value:function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),n}(u);if(m.requestsCount=0,m.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",k);else if("function"===typeof addEventListener){var g="onpagehide"in p?"pagehide":"unload";addEventListener(g,k,!1)}function k(){for(var e in m.requests)m.requests.hasOwnProperty(e)&&m.requests[e].abort()}e.exports=v,e.exports.Request=m},121:function(e,t,n){var r=n(172)["default"],o=n(378)["default"],i=n(5967)["default"],s=n(7207)["default"];n(1539),n(4747),n(9653);var a=n(4576),c=n(4957),u=n(434),l=n(2738),f=n(3649)("engine.io-client:polling"),p=function(e){"use strict";i(n,e);var t=s(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;function n(){f("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(f("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){f("pre-pause polling complete"),--r||n()}))),this.writable||(f("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){f("pre-pause writing complete"),--r||n()})))}else n()}},{key:"poll",value:function(){f("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;f("polling got data %s",e);var n=function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)};u.decodePayload(e,this.socket.binaryType).forEach(n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():f('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){var e=this;function t(){f("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(f("transport open - closing"),t()):(f("transport not open - deferring close"),this.once("open",t))}},{key:"write",value:function(e){var t=this;this.writable=!1,u.encodePayload(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=c.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e);var r=-1!==this.opts.hostname.indexOf(":");return t+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}]),n}(a);e.exports=p},8056:function(e,t,n){var r=n(3460);e.exports={WebSocket:r.WebSocket||r.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"}},418:function(e,t,n){var r=n(172)["default"],o=n(378)["default"],i=n(5967)["default"],s=n(7207)["default"];n(9653),n(8309);var a=n(4576),c=n(434),u=n(4957),l=n(2738),f=n(9756),p=f.pick,h=n(8056),d=h.WebSocket,y=h.usingBrowserWebSocket,v=h.defaultBinaryType,m=n(3649)("engine.io-client:websocket"),g="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),k=function(e){"use strict";i(n,e);var t=s(n);function n(e){var o;return r(this,n),o=t.call(this,e),o.supportsBinary=!e.forceBase64,o}return o(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=g?{}:p(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=y&&!g?t?new d(e,t):new d(e):new d(e,t,n)}catch(r){return this.emit("error",r)}this.ws.binaryType=this.socket.binaryType||v,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=e.length,r=0,o=n;r<o;r++)(function(e){c.encodePacket(e,t.supportsBinary,(function(r){var o={};if(!y&&(e.options&&(o.compress=e.options.compress),t.opts.perMessageDeflate)){var s="string"===typeof r?Buffer.byteLength(r):r.length;s<t.opts.perMessageDeflate.threshold&&(o.compress=!1)}try{y?t.ws.send(r):t.ws.send(r,o)}catch(a){m("websocket closed before onclose event")}--n||i()}))})(e[r]);function i(){t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0)}}},{key:"onClose",value:function(){a.prototype.onClose.call(this)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=u.encode(e),e.length&&(e="?"+e);var r=-1!==this.opts.hostname.indexOf(":");return t+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}},{key:"check",value:function(){return!!d&&!("__initialize"in d&&this.name===n.prototype.name)}}]),n}(a);e.exports=k},9756:function(e,t,n){n(1539),e.exports.pick=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},3323:function(e,t,n){n(9600),n(2222);var r=n(2972),o=n(3460);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(s){}try{if("undefined"!==typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(s){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}},6569:function(e,t,n){n(1539),n(4747),n(7941);var r=Object.create(null);r["open"]="0",r["close"]="1",r["ping"]="2",r["pong"]="3",r["message"]="4",r["upgrade"]="5",r["noop"]="6";var o=Object.create(null);Object.keys(r).forEach((function(e){o[r[e]]=e}));var i={type:"error",data:"parser error"};e.exports={PACKET_TYPES:r,PACKET_TYPES_REVERSE:o,ERROR_PACKET:i}},6679:function(e,t,n){n(8264),n(1539);var r,o=n(6569),i=o.PACKET_TYPES_REVERSE,s=o.ERROR_PACKET,a="function"===typeof ArrayBuffer;a&&(r=n(2508));var c=function(e,t){if("string"!==typeof e)return{type:"message",data:l(e,t)};var n=e.charAt(0);if("b"===n)return{type:"message",data:u(e.substring(1),t)};var r=i[n];return r?e.length>1?{type:i[n],data:e.substring(1)}:{type:i[n]}:s},u=function(e,t){if(r){var n=r.decode(e);return l(n,t)}return{base64:!0,data:e}},l=function(e,t){switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};e.exports=c},9168:function(e,t,n){n(1539),n(8264),n(4916),n(6735);var r=n(6569),o=r.PACKET_TYPES,i="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"===typeof ArrayBuffer,a=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},c=function(e,t,n){var r=e.type,c=e.data;return i&&c instanceof Blob?t?n(c):u(c,n):s&&(c instanceof ArrayBuffer||a(c))?t?n(c):u(new Blob([c]),n):n(o[r]+(c||""))},u=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};e.exports=c},434:function(e,t,n){n(1539),n(4747),n(9600),n(4916),n(6735);var r=n(9168),o=n(6679),i=String.fromCharCode(30),s=function(e,t){var n=e.length,o=new Array(n),s=0;e.forEach((function(e,a){r(e,!1,(function(e){o[a]=e,++s===n&&t(o.join(i))}))}))},a=function(e,t){for(var n=e.split(i),r=[],s=0;s<n.length;s++){var a=o(n[s],t);if(r.push(a),"error"===a.type)break}return r};e.exports={protocol:4,encodePacket:r,encodePayload:s,decodePacket:o,decodePayload:a}},2972:function(e){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},6920:function(e,t,n){var r=n(7964)["default"];n(1703),n(8862),n(4916);var o=1e3,i=60*o,s=60*i,a=24*s,c=7*a,u=365.25*a;function l(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"weeks":case"week":case"w":return n*c;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function f(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=s?Math.round(e/s)+"h":t>=i?Math.round(e/i)+"m":t>=o?Math.round(e/o)+"s":e+"ms"}function p(e){var t=Math.abs(e);return t>=a?h(e,t,a,"day"):t>=s?h(e,t,s,"hour"):t>=i?h(e,t,i,"minute"):t>=o?h(e,t,o,"second"):e+" ms"}function h(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,t){t=t||{};var n=r(e);if("string"===n&&e.length>0)return l(e);if("number"===n&&isFinite(e))return t.long?p(e):f(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4957:function(e,t,n){n(4916),n(6735),t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},3519:function(e,t,n){n(4916),n(5306),n(6735),n(561);var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function i(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1),"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1),r}function s(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}e.exports=function(e){var t=e,n=e.indexOf("["),a=e.indexOf("]");-1!=n&&-1!=a&&(e=e.substring(0,n)+e.substring(n,a).replace(/:/g,";")+e.substring(a,e.length));var c=r.exec(e||""),u={},l=14;while(l--)u[o[l]]=c[l]||"";return-1!=n&&-1!=a&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=i(u,u["path"]),u.queryKey=s(u,u["query"]),u}},1010:function(e,t,n){"use strict";var r=n(7964)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;var o=n(4518);function i(e){var t=[],n=e.data,r=e;return r.data=s(n,t),r.attachments=t.length,{packet:r,buffers:t}}function s(e,t){if(!e)return e;if(o.isBinary(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var i=new Array(e.length),a=0;a<e.length;a++)i[a]=s(e[a],t);return i}if("object"===r(e)&&!(e instanceof Date)){var c={};for(var u in e)e.hasOwnProperty(u)&&(c[u]=s(e[u],t));return c}return e}function a(e,t){return e.data=c(e.data,t),e.attachments=void 0,e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t);else if("object"===r(e))for(var o in e)e.hasOwnProperty(o)&&(e[o]=c(e[o],t));return e}t.deconstructPacket=i,t.reconstructPacket=a},9061:function(e,t,n){"use strict";var r=n(7964)["default"],o=n(6760)["default"],i=n(358)["default"],s=n(5967)["default"],a=n(7207)["default"],c=n(172)["default"],u=n(378)["default"];n(8862),n(1703),n(9653),Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;var l,f=n(2559),p=n(1010),h=n(4518),d=n(3649)("socket.io-parser");t.protocol=5,function(e){e[e["CONNECT"]=0]="CONNECT",e[e["DISCONNECT"]=1]="DISCONNECT",e[e["EVENT"]=2]="EVENT",e[e["ACK"]=3]="ACK",e[e["CONNECT_ERROR"]=4]="CONNECT_ERROR",e[e["BINARY_EVENT"]=5]="BINARY_EVENT",e[e["BINARY_ACK"]=6]="BINARY_ACK"}(l=t.PacketType||(t.PacketType={}));var y=function(){function e(){c(this,e)}return u(e,[{key:"encode",value:function(e){return d("encoding packet %j",e),e.type!==l.EVENT&&e.type!==l.ACK||!h.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===l.EVENT?l.BINARY_EVENT:l.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==l.BINARY_EVENT&&e.type!==l.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),d("encoded %j as %s",e,t),t}},{key:"encodeAsBinary",value:function(e){var t=p.deconstructPacket(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}();t.Encoder=y;var v=function(e){s(n,e);var t=a(n);function n(){return c(this,n),t.call(this)}return u(n,[{key:"add",value:function(e){var t;if("string"===typeof e)t=this.decodeString(e),t.type===l.BINARY_EVENT||t.type===l.BINARY_ACK?(this.reconstructor=new g(t),0===t.attachments&&o(i(n.prototype),"emit",this).call(this,"decoded",t)):o(i(n.prototype),"emit",this).call(this,"decoded",t);else{if(!h.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,o(i(n.prototype),"emit",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===l[r.type])throw new Error("unknown packet type "+r.type);if(r.type===l.BINARY_EVENT||r.type===l.BINARY_ACK){var o=t+1;while("-"!==e.charAt(++t)&&t!=e.length);var i=e.substring(o,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){var s=t+1;while(++t){var a=e.charAt(t);if(","===a)break;if(t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";var c=e.charAt(t+1);if(""!==c&&Number(c)==c){var u=t+1;while(++t){var f=e.charAt(t);if(null==f||Number(f)!=f){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var p=m(e.substr(t));if(!n.isPayloadValid(r.type,p))throw new Error("invalid payload");r.data=p}return d("decoded %s as %j",e,r),r}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case l.CONNECT:return"object"===r(t);case l.DISCONNECT:return void 0===t;case l.CONNECT_ERROR:return"string"===typeof t||"object"===r(t);case l.EVENT:case l.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case l.ACK:case l.BINARY_ACK:return Array.isArray(t)}}}]),n}(f);function m(e){try{return JSON.parse(e)}catch(t){return!1}}t.Decoder=v;var g=function(){function e(t){c(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return u(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}()},4518:function(e,t,n){"use strict";var r=n(7964)["default"];n(8264),n(1539),n(3753),Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;var o="function"===typeof ArrayBuffer,i=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},s=Object.prototype.toString,a="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===s.call(Blob),c="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===s.call(File);function u(e){return o&&(e instanceof ArrayBuffer||i(e))||a&&e instanceof Blob||c&&e instanceof File}function l(e,t){if(!e||"object"!==r(e))return!1;if(Array.isArray(e)){for(var n=0,o=e.length;n<o;n++)if(l(e[n]))return!0;return!1}if(u(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return l(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&l(e[i]))return!0;return!1}t.isBinary=u,t.hasBinary=l},2738:function(e,t,n){"use strict";n(4916),n(6735);var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,s={},a=0,c=0;function u(e){var t="";do{t=o[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function l(e){var t=0;for(c=0;c<e.length;c++)t=t*i+s[e.charAt(c)];return t}function f(){var e=u(+new Date);return e!==r?(a=0,r=e):e+"."+u(a++)}for(;c<i;c++)s[o[c]]=c;f.encode=u,f.decode=l,e.exports=f},4793:function(e,t,n){"use strict";var r=n(7964)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.io=t.Manager=t.protocol=void 0;var o=n(6467),i=n(6819),s=n(7114);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return s.Socket}});var a=n(3649)("socket.io-client");e.exports=t=u;var c=t.managers={};function u(e,t){"object"===r(e)&&(t=e,e=void 0),t=t||{};var n,s=o.url(e,t.path),u=s.source,l=s.id,f=s.path,p=c[l]&&f in c[l]["nsps"],h=t.forceNew||t["force new connection"]||!1===t.multiplex||p;return h?(a("ignoring socket cache for %s",u),n=new i.Manager(u,t)):(c[l]||(a("new io instance for %s",u),c[l]=new i.Manager(u,t)),n=c[l]),s.query&&!t.query&&(t.query=s.queryKey),n.socket(s.path,t)}t.io=u;var l=n(9061);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.connect=u;var f=n(6819);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return f.Manager}})},6819:function(e,t,n){"use strict";var r=n(7964)["default"],o=n(172)["default"],i=n(378)["default"],s=n(5967)["default"],a=n(7207)["default"];n(1703),n(7941),n(1539),n(4747),Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;var c=n(6940),u=n(7114),l=n(9061),f=n(4465),p=n(7490),h=n(3494),d=n(3649)("socket.io-client:manager"),y=function(e){s(n,e);var t=a(n);function n(e,i){var s;o(this,n),s=t.call(this),s.nsps={},s.subs=[],e&&"object"===r(e)&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",s.opts=i,s.reconnection(!1!==i.reconnection),s.reconnectionAttempts(i.reconnectionAttempts||1/0),s.reconnectionDelay(i.reconnectionDelay||1e3),s.reconnectionDelayMax(i.reconnectionDelayMax||5e3),s.randomizationFactor(i.randomizationFactor||.5),s.backoff=new p({min:s.reconnectionDelay(),max:s.reconnectionDelayMax(),jitter:s.randomizationFactor()}),s.timeout(null==i.timeout?2e4:i.timeout),s._readyState="closed",s.uri=e;var a=i.parser||l;return s.encoder=new a.Encoder,s.decoder=new a.Decoder,s._autoConnect=!1!==i.autoConnect,s._autoConnect&&s.open(),s}return i(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(d("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=c(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var o=f.on(n,"open",(function(){r.onopen(),e&&e()})),i=f.on(n,"error",(function(n){d("error"),r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;d("connect attempt will timeout after %d",s),0===s&&o();var a=setTimeout((function(){d("connect attempt timed out after %d",s),o(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(o),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){d("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(f.on(e,"ping",this.onping.bind(this)),f.on(e,"data",this.ondata.bind(this)),f.on(e,"error",this.onerror.bind(this)),f.on(e,"close",this.onclose.bind(this)),f.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){d("error",e),this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new u.Socket(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=Object.keys(this.nsps),n=0,r=t;n<r.length;n++){var o=r[n],i=this.nsps[o];if(i.active)return void d("socket %s is still active, skipping close",o)}this._close()}},{key:"_packet",value:function(e){d("writing packet %j",e);for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){d("cleanup"),this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){d("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){d("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();d("will wait %dms before reconnect attempt",n),this._reconnecting=!0;var r=setTimeout((function(){t.skipReconnect||(d("attempting reconnect"),e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(d("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):(d("reconnect success"),t.onreconnect())})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(h.StrictEventEmitter);t.Manager=y},4465:function(e,t){"use strict";function n(e,t,n){return e.on(t,n),function(){e.off(t,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0,t.on=n},7114:function(e,t,n){"use strict";var r=n(5276)["default"],o=n(172)["default"],i=n(378)["default"],s=n(6760)["default"],a=n(358)["default"],c=n(5967)["default"],u=n(7207)["default"];n(3371),n(2087),n(1703),n(7042),n(1539),n(4747),n(561),Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;var l=n(9061),f=n(4465),p=n(3494),h=n(3649)("socket.io-client:socket"),d=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),y=function(e){c(n,e);var t=u(n);function n(e,r,i){var s;return o(this,n),s=t.call(this),s.receiveBuffer=[],s.sendBuffer=[],s.ids=0,s.acks={},s.flags={},s.io=e,s.nsp=r,s.ids=0,s.acks={},s.receiveBuffer=[],s.sendBuffer=[],s.connected=!1,s.disconnected=!0,s.flags={},i&&i.auth&&(s.auth=i.auth),s.io._autoConnect&&s.open(),s}return i(n,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[f.on(e,"open",this.onopen.bind(this)),f.on(e,"packet",this.onpacket.bind(this)),f.on(e,"error",this.onerror.bind(this)),f.on(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(d.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var o={type:l.PacketType.EVENT,data:n,options:{}};o.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=n.pop(),o.id=this.ids++);var i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,s=this.flags.volatile&&(!i||!this.connected);return s?h("discard packet as the transport is not currently writable"):this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;h("transport is open - connecting"),"function"==typeof this.auth?this.auth((function(t){e.packet({type:l.PacketType.CONNECT,data:t})})):this.packet({type:l.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){h("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){var t=e.nsp===this.nsp;if(t)switch(e.type){case l.PacketType.CONNECT:if(e.data&&e.data.sid){var n=e.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case l.PacketType.EVENT:this.onevent(e);break;case l.PacketType.BINARY_EVENT:this.onevent(e);break;case l.PacketType.ACK:this.onack(e);break;case l.PacketType.BINARY_ACK:this.onack(e);break;case l.PacketType.DISCONNECT:this.ondisconnect();break;case l.PacketType.CONNECT_ERROR:var r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}},{key:"onevent",value:function(e){var t=e.data||[];h("emitting event %j",t),null!=e.id&&(h("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,o=this._anyListeners.slice(),i=r(o);try{for(i.s();!(t=i.n()).done;){var c=t.value;c.apply(this,e)}}catch(u){i.e(u)}finally{i.f()}}s(a(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];h("sending ack %j",o),t.packet({type:l.PacketType.ACK,id:e,data:o})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t?(h("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):h("bad ack %s",e.id)}},{key:"onconnect",value:function(e){h("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitReserved("connect"),this.emitBuffered()}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io["_destroy"](this)}},{key:"disconnect",value:function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:l.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),n}(p.StrictEventEmitter);t.Socket=y},3494:function(e,t,n){"use strict";var r=n(172)["default"],o=n(378)["default"],i=n(6760)["default"],s=n(358)["default"],a=n(5967)["default"],c=n(7207)["default"];n(2222),Object.defineProperty(t,"__esModule",{value:!0}),t.StrictEventEmitter=void 0;var u=n(2559),l=function(e){a(n,e);var t=c(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"on",value:function(e,t){return i(s(n.prototype),"on",this).call(this,e,t),this}},{key:"once",value:function(e,t){return i(s(n.prototype),"once",this).call(this,e,t),this}},{key:"emit",value:function(e){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(t=i(s(n.prototype),"emit",this)).call.apply(t,[this,e].concat(o)),this}},{key:"emitReserved",value:function(e){for(var t,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return(t=i(s(n.prototype),"emit",this)).call.apply(t,[this,e].concat(o)),this}},{key:"listeners",value:function(e){return i(s(n.prototype),"listeners",this).call(this,e)}}]),n}(u);t.StrictEventEmitter=l},6467:function(e,t,n){"use strict";n(4916),n(7601),Object.defineProperty(t,"__esModule",{value:!0}),t.url=void 0;var r=n(3519),o=n(3649)("socket.io-client:url");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),o("parse %s",e),i=r(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var s=-1!==i.host.indexOf(":"),a=s?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+a+":"+i.port+t,i.href=i.protocol+"://"+a+(n&&n.port===i.port?"":":"+i.port),i}t.url=i}}]);
//# sourceMappingURL=Chat-legacy.3bca4570.js.map