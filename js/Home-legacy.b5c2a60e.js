"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[268],{7118:function(t,e,n){n.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell",{scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"title-box"},[n("span",[t._v(t._s(t.artObj.title))]),1===t.artObj.cover.type?n("img",{staticClass:"thumb",attrs:{src:t.artObj.cover.images,alt:""}}):t._e()]),t.artObj.cover.type>1?n("div",{staticClass:"thumb-box"},t._l(t.artObj.cover.images,(function(t,e){return n("img",{key:e,staticClass:"thumb",attrs:{src:t}})})),0):t._e()]},proxy:!0},{key:"label",fn:function(){return[n("div",{staticClass:"label-box"},[n("div",[n("span",[t._v(t._s(t.artObj.aut_name))]),n("span",[t._v(t._s(t.artObj.comm_count)+"评论")]),n("span",[t._v(t._s(t.formatTime(t.artObj.pubdate)))])]),t.SearchParam?n("van-icon",{attrs:{name:"cross"},on:{click:function(e){e.stopPropagation(),t.show=!0}}}):t._e()],1)]},proxy:!0}])}),n("van-action-sheet",{attrs:{actions:t.actions,"get-container":"body","cancel-text":t.bottomText},on:{select:t.onSelect,cancel:t.cancelFn,close:t.closeFn},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},i=[],s=(n(8309),n(1709)),r=[{name:"不感兴趣"},{name:"反馈垃圾内容"}],c=[{value:0,name:"其它问题"},{value:1,name:"标题夸张"},{value:2,name:"低俗色情"},{value:3,name:"错别字多"},{value:4,name:"旧闻重复"},{value:6,name:"内容不实"},{value:8,name:"侵权"},{value:5,name:"广告软文"},{value:7,name:"涉嫌违法犯罪"}],o={name:"ArticleItem",props:{artObj:Object,SearchParam:{default:!0}},data:function(){return{formatTime:s.S,show:!1,actions:r,bottomText:"取消"}},methods:{onSelect:function(t){"反馈垃圾内容"===t.name?(this.actions=c,this.bottomText="返回"):"不感兴趣"===t.name?(this.$emit("dislikeEV",this.artObj.art_id),this.show=!1):(this.$emit("reportEV",this.artObj.art_id,t.value),this.show=!1)},cancelFn:function(){"返回"===this.bottomText&&(this.actions=r,this.bottomText="取消",this.show=!0)},closeFn:function(){this.actions=r,this.bottomText="取消"}}},l=o,u=n(1001),h=(0,u.Z)(l,a,i,!1,null,"5bbd6f11",null),d=h.exports},8949:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("van-nav-bar",{attrs:{fixed:""},scopedSlots:t._u([{key:"left",fn:function(){return[a("img",{staticClass:"logo",attrs:{src:n(6949),alt:""}})]},proxy:!0},{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"search",size:"0.54rem",color:"#fff"},on:{click:t.moveSearchFn}})]},proxy:!0}])})],1),a("div",{staticClass:"main"},[a("van-tabs",{attrs:{animated:"",sticky:"","offset-top":"0.46rem"},model:{value:t.channelId,callback:function(e){t.channelId=e},expression:"channelId"}},t._l(t.channelsList,(function(e){return a("van-tab",{key:e.id,attrs:{title:e.name,name:e.id}},[a("ArticleList",{attrs:{channelId:t.channelId}})],1)})),1),a("van-icon",{staticClass:"moreChannels",attrs:{name:"plus",size:"0.37333334rem"},on:{click:function(e){t.show=!0}}})],1),a("van-popup",{attrs:{"get-container":"body"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("ChannelEdit",{attrs:{userList:t.channelsList,unCheckLIst:t.unCheckChannelList},on:{addChannelEv:t.addChannelFn,removeChannelEV:t.removeChannelFn,closeEv:t.closeFn},model:{value:t.channelId,callback:function(e){t.channelId=e},expression:"channelId"}})],1)],1)},i=[],s=n(6198),r=(n(7327),n(1539),n(8309),n(4553),n(8975),n(693)),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1,offset:"50"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return n("ArticleItem",{key:e.art_id,attrs:{artObj:e},on:{dislikeEV:t.dislikeFn,reportEV:t.reportFn},nativeOn:{click:function(n){return t.itemClickFn(e.art_id)}}})})),1)],1)],1)},o=[],l=(n(5642),n(8398)),u=n(4479),h=(n(9653),n(2222),n(7118)),d={name:"ArticleList",props:{channelId:Number},data:function(){return{list:[],loading:!1,finished:!1,thetime:(new Date).getTime(),isLoading:!1}},methods:{getArticleList:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.xP)({channel_id:t.channelId,timestamp:t.thetime});case 2:n=e.sent,t.thetime=n.data.data.pre_timestamp,t.list=[].concat((0,u.Z)(t.list),(0,u.Z)(n.data.data.results)),t.loading=!1,null===n.data.data.pre_timestamp&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},onLoad:function(){0!==this.list.length?this.list.length>0&&this.getArticleList():this.loading=!1},onRefresh:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.thetime=(new Date).getTime(),e.next=3,(0,r.xP)({channel_id:t.channelId,timestamp:t.thetime});case 3:n=e.sent,a=n.data,t.thetime=a.data.pre_timestamp,t.list=a.data.results,t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},dislikeFn:function(t){return(0,s.Z)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,r.s9)({artId:t});case 3:n=e.sent,a=n.data,console.log(a),(0,l.Z)({type:"success",message:"反馈成功"}),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},reportFn:function(t,e){return(0,s.Z)(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,r.gk)({artId:t,value:e});case 3:a=n.sent,i=a.data,console.log(i),(0,l.Z)({type:"success",message:"举报成功"}),n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})))()},itemClickFn:function(t){this.$router.push({path:"/detail?art_id=".concat(t)})}},components:{ArticleItem:h.Z},created:function(){this.getArticleList()}},m=d,f=n(1001),v=(0,f.Z)(m,c,o,!1,null,null,null),p=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"频道管理"},scopedSlots:t._u([{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"cross",size:"0.37333334rem",color:"white"},on:{click:t.closeFn}})]},proxy:!0}])}),n("div",{staticClass:"my-channel-box"},[n("div",{staticClass:"channel-title"},[n("span",[t._v("我的频道 "),n("span",{staticClass:"small-title"},[t._v(" "+t._s(t.isEdit?"点击删除频道":"点击进入频道")+" ")])]),n("span",{on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"完成":"编辑"))])]),n("van-row",{attrs:{type:"flex"}},t._l(t.userList,(function(e){return n("van-col",{key:e.id,attrs:{span:"6"},on:{click:function(n){return t.removeChannel(e)}}},[n("div",{staticClass:"channel-item van-hairline--surround"},[t._v(" "+t._s(e.name)+" "),t.isEdit&&"推荐"!==e.name?n("van-badge",{staticClass:"cross-badge",attrs:{color:"transparent"},scopedSlots:t._u([{key:"content",fn:function(){return[n("van-icon",{staticClass:"badge-icon",attrs:{name:"cross",color:"#cfcfcf",size:"0.32rem"}})]},proxy:!0}],null,!0)}):t._e()],1)])})),1)],1),n("div",{staticClass:"more-channel-box"},[t._m(0),n("van-row",{attrs:{type:"flex"}},t._l(t.unCheckLIst,(function(e){return n("van-col",{key:e.id,attrs:{span:"6"},on:{click:function(n){return t.moreFn(e)}}},[n("div",{staticClass:"channel-item van-hairline--surround"},[t._v(t._s(e.name))])])})),1)],1)],1)},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-title"},[n("span",[t._v("点击添加更多频道：")])])}],_={name:"ChannelEdit",props:{userList:{type:Array},unCheckLIst:{type:Array}},data:function(){return{isEdit:!1}},methods:{moreFn:function(t){this.isEdit&&this.$emit("addChannelEv",t)},removeChannel:function(t){this.isEdit?this.$emit("removeChannelEV",t):(this.$emit("input",t.id),this.closeFn())},closeFn:function(){this.isEdit=!1,this.$emit("closeEv")}}},b=_,k=(0,f.Z)(b,g,x,!1,null,"31a6cef4",null),C=k.exports,w={name:"Home",components:{ArticleList:p,ChannelEdit:C},data:function(){return{channelId:0,channelsList:[],allChannelList:[],show:!1}},methods:{addChannelFn:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.channelsList.push(t),n.next=3,(0,r.wJ)({channels:e.channelsList});case 3:case"end":return n.stop()}}),n)})))()},removeChannelFn:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.channelsList=e.channelsList.filter((function(e){return"推荐"===t.name||t.id!==e.id})),n.next=3,(0,r.wJ)({channels:e.channelsList});case 3:case"end":return n.stop()}}),n)})))()},closeFn:function(){this.show=!1},moveSearchFn:function(){this.$router.push("/search")}},computed:{unCheckChannelList:function(){var t=this,e=this.allChannelList.filter((function(e){var n=t.channelsList.findIndex((function(t){return t.id===e.id}));return!(n>-1)}));return e}},created:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.lS)();case 2:return n=e.sent,a=n.data,t.channelsList=a.data.channels,e.next=7,(0,r.Of)();case 7:i=e.sent,s=i.data,t.allChannelList=s.data.channels;case 10:case"end":return e.stop()}}),e)})))()}},L=w,y=(0,f.Z)(L,a,i,!1,null,"a4777d12",null),E=y.exports},4553:function(t,e,n){var a=n(2109),i=n(2092).findIndex,s=n(1223),r="findIndex",c=!0;r in[]&&Array(1)[r]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(r)},6949:function(t,e,n){t.exports=n.p+"img/logo.d0d391a4.png"}}]);
//# sourceMappingURL=Home-legacy.b5c2a60e.js.map