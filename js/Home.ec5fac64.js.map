{"version":3,"file":"js/Home.ec5fac64.js","mappings":"0JAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,IAAIC,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,WAAW,MAAO,CAACN,EAAG,MAAM,CAACO,YAAY,OAAOL,MAAM,CAAC,IAAM,EAAQ,MAAqB,IAAM,QAAQM,OAAM,GAAM,CAACH,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACN,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,UAAU,MAAQ,QAAQO,GAAG,CAAC,MAAQb,EAAIc,kBAAkBF,OAAM,QAAW,GAAGR,EAAG,MAAM,CAACO,YAAY,QAAQ,CAACP,EAAG,WAAW,CAACE,MAAM,CAAC,SAAW,GAAG,OAAS,GAAG,aAAa,WAAWS,MAAM,CAACC,MAAOhB,EAAa,UAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,UAAUD,GAAKE,WAAW,cAAcpB,EAAIqB,GAAIrB,EAAgB,cAAE,SAASsB,GAAM,OAAOlB,EAAG,UAAU,CAACK,IAAIa,EAAKC,GAAGjB,MAAM,CAAC,MAAQgB,EAAKE,KAAK,KAAOF,EAAKC,KAAK,CAACnB,EAAG,cAAc,CAACE,MAAM,CAAC,UAAYN,EAAImB,cAAc,MAAK,GAAGf,EAAG,WAAW,CAACO,YAAY,eAAeL,MAAM,CAAC,KAAO,OAAO,KAAO,iBAAiBO,GAAG,CAAC,MAAQ,SAASY,GAAQzB,EAAI0B,MAAO,OAAU,GAAGtB,EAAG,YAAY,CAACE,MAAM,CAAC,gBAAgB,QAAQS,MAAM,CAACC,MAAOhB,EAAQ,KAAEiB,SAAS,SAAUC,GAAMlB,EAAI0B,KAAKR,GAAKE,WAAW,SAAS,CAAChB,EAAG,cAAc,CAACE,MAAM,CAAC,SAAWN,EAAI2B,aAAa,YAAc3B,EAAI4B,oBAAoBf,GAAG,CAAC,aAAeb,EAAI6B,aAAa,gBAAkB7B,EAAI8B,gBAAgB,QAAU9B,EAAI+B,SAAShB,MAAM,CAACC,MAAOhB,EAAa,UAAEiB,SAAS,SAAUC,GAAMlB,EAAImB,UAAUD,GAAKE,WAAW,gBAAgB,IAAI,IAC53CY,EAAkB,G,SCDlB,EAAS,WAAa,IAAIhC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,mBAAmB,CAACS,GAAG,CAAC,QAAUb,EAAIiC,WAAWlB,MAAM,CAACC,MAAOhB,EAAa,UAAEiB,SAAS,SAAUC,GAAMlB,EAAIkC,UAAUhB,GAAKE,WAAW,cAAc,CAAChB,EAAG,WAAW,CAACE,MAAM,CAAC,SAAWN,EAAImC,SAAS,gBAAgB,QAAQ,mBAAkB,EAAM,OAAS,MAAMtB,GAAG,CAAC,KAAOb,EAAIoC,QAAQrB,MAAM,CAACC,MAAOhB,EAAW,QAAEiB,SAAS,SAAUC,GAAMlB,EAAIqC,QAAQnB,GAAKE,WAAW,YAAYpB,EAAIqB,GAAIrB,EAAQ,MAAE,SAASsB,GAAM,OAAOlB,EAAG,cAAc,CAACK,IAAIa,EAAKgB,OAAOhC,MAAM,CAAC,OAASgB,GAAMT,GAAG,CAAC,UAAYb,EAAIuC,UAAU,SAAWvC,EAAIwC,UAAUC,SAAS,CAAC,MAAQ,SAAShB,GAAQ,OAAOzB,EAAI0C,YAAYpB,EAAKgB,eAAc,IAAI,IAAI,IACzsB,EAAkB,G,8BCoBtB,GACAd,KAAAA,cACAmB,MAAAA,CACAxB,UAAAA,QAEAyB,OACA,OACAC,KAAAA,GACAR,SAAAA,EACAF,UAAAA,EACAW,SAAAA,IAAAA,MAAAA,UACAZ,WAAAA,IAGAa,QAAAA,CAEA,uBAEA,uBACAC,WAAAA,KAAAA,UACAC,UAAAA,KAAAA,UAGA,uCACA,gDAEA,gBAGA,mCACA,mBAIAb,SACA,qBAKA,oBACA,sBALA,iBASA,kBAEA,kCACA,MAAAQ,KAAAA,SAAA,SACAI,WAAAA,KAAAA,UACAC,UAAAA,KAAAA,UAEA,kCACA,yBACA,mBAGA,mBACA,IACA,MAAAL,KAAAA,SAAA,SAAAM,MAAAA,IACAC,QAAAA,IAAAA,IACA,QAAAC,KAAAA,UAAAC,QAAAA,SACA,YAIA,oBACA,IACA,MAAAT,KAAAA,SAAA,SAAAM,MAAAA,EAAAlC,MAAAA,IACAmC,QAAAA,IAAAA,IACA,QAAAC,KAAAA,UAAAC,QAAAA,SACA,YAIAX,YAAAA,GACA,mBACAY,KAAAA,kBAAAA,QAIAC,WAAAA,CACAC,YAAAA,EAAAA,GAEAC,UACA,wBC1GyR,I,UCOrRC,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAeA,EAAiB,QClB5B,EAAS,WAAa,IAAI1D,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,QAAQC,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACN,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,QAAQ,KAAO,gBAAgB,MAAQ,SAASO,GAAG,CAAC,MAAQb,EAAI+B,aAAanB,OAAM,OAAUR,EAAG,MAAM,CAACO,YAAY,kBAAkB,CAACP,EAAG,MAAM,CAACO,YAAY,iBAAiB,CAACP,EAAG,OAAO,CAACJ,EAAI2D,GAAG,SAASvD,EAAG,OAAO,CAACO,YAAY,eAAe,CAACX,EAAI2D,GAAG,IAAI3D,EAAI4D,GAAG5D,EAAI6D,OAAS,SAAW,UAAU,SAASzD,EAAG,OAAO,CAACS,GAAG,CAAC,MAAQ,SAASY,GAAQzB,EAAI6D,QAAU7D,EAAI6D,UAAU,CAAC7D,EAAI2D,GAAG3D,EAAI4D,GAAG5D,EAAI6D,OAAS,KAAO,WAAWzD,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,SAASN,EAAIqB,GAAIrB,EAAY,UAAE,SAASsB,GAAM,OAAOlB,EAAG,UAAU,CAACK,IAAIa,EAAKC,GAAGjB,MAAM,CAAC,KAAO,KAAKO,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOzB,EAAI8D,cAAcxC,MAAS,CAAClB,EAAG,MAAM,CAACO,YAAY,uCAAuC,CAACX,EAAI2D,GAAG,IAAI3D,EAAI4D,GAAGtC,EAAKE,MAAM,KAAMxB,EAAI6D,QAAwB,OAAdvC,EAAKE,KAAepB,EAAG,YAAY,CAACO,YAAY,cAAcL,MAAM,CAAC,MAAQ,eAAeC,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,WAAW,MAAO,CAACN,EAAG,WAAW,CAACO,YAAY,aAAaL,MAAM,CAAC,KAAO,QAAQ,MAAQ,UAAU,KAAO,eAAeM,OAAM,IAAO,MAAK,KAAQZ,EAAI+D,MAAM,QAAO,IAAI,GAAG3D,EAAG,MAAM,CAACO,YAAY,oBAAoB,CAACX,EAAIgE,GAAG,GAAG5D,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,SAASN,EAAIqB,GAAIrB,EAAe,aAAE,SAASsB,GAAM,OAAOlB,EAAG,UAAU,CAACK,IAAIa,EAAKC,GAAGjB,MAAM,CAAC,KAAO,KAAKO,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOzB,EAAIiE,OAAO3C,MAAS,CAAClB,EAAG,MAAM,CAACO,YAAY,uCAAuC,CAACX,EAAI2D,GAAG3D,EAAI4D,GAAGtC,EAAKE,cAAa,IAAI,IAAI,IACjjD,EAAkB,CAAC,WAAa,IAAIxB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACO,YAAY,iBAAiB,CAACP,EAAG,OAAO,CAACJ,EAAI2D,GAAG,mBCkDpK,GACAnC,KAAAA,cAEAmB,MAAAA,CACAuB,SAAAA,CAAAd,KAAAA,OACAe,YAAAA,CAAAf,KAAAA,QAEAR,OACA,OAEAiB,QAAAA,IAGAd,QAAAA,CAEAkB,OAAAA,GAEA,aAEA,8BAIAH,cAAAA,GAEA,YACA,iCAGA,yBACA,iBAIA/B,UACA,eAEA,yBCxFgR,ICQ5Q,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QC2BhC,GACAP,KAAAA,OACA+B,WAAAA,CACAa,YADA,EAEAC,YAAAA,GAEAzB,OACA,OAEAzB,UAAAA,EACAQ,aAAAA,GACA2C,eAAAA,GACA5C,MAAAA,IAGAqB,QAAAA,CAEA,sBACA,gCAGA,SACAwB,SAAAA,KAAAA,gBAIA,yBACA,+CACA,eAIA,oBAEA,SACAA,SAAAA,KAAAA,gBAIAxC,UACA,cAGAjB,eACA,+BAGA0D,SAAAA,CAEA5C,qBAEA,wCAEA,wCAEA,cAEA,iBAQA,WAGA,gBAEA,MAAAgB,KAAAA,SAAA,UACA,kCAGA,MAAAA,KAAAA,SAAA,UACA,sCCzH0Q,ICQtQ,GAAY,OACd,EACA7C,EACAiC,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,S","sources":["webpack://toutiao/./src/views/Home/index.vue?99fd","webpack://toutiao/./src/views/Home/components/ArticleList.vue?484d","webpack://toutiao/src/views/Home/components/ArticleList.vue","webpack://toutiao/./src/views/Home/components/ArticleList.vue?cde1","webpack://toutiao/./src/views/Home/components/ArticleList.vue","webpack://toutiao/./src/views/Home/ChannelEdit.vue?0627","webpack://toutiao/src/views/Home/ChannelEdit.vue","webpack://toutiao/./src/views/Home/ChannelEdit.vue?f4bf","webpack://toutiao/./src/views/Home/ChannelEdit.vue","webpack://toutiao/src/views/Home/index.vue","webpack://toutiao/./src/views/Home/index.vue?f10d","webpack://toutiao/./src/views/Home/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"fixed\":\"\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"@/assets/logo.png\"),\"alt\":\"\"}})]},proxy:true},{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"search\",\"size\":\"0.54rem\",\"color\":\"#fff\"},on:{\"click\":_vm.moveSearchFn}})]},proxy:true}])})],1),_c('div',{staticClass:\"main\"},[_c('van-tabs',{attrs:{\"animated\":\"\",\"sticky\":\"\",\"offset-top\":\"0.46rem\"},model:{value:(_vm.channelId),callback:function ($$v) {_vm.channelId=$$v},expression:\"channelId\"}},_vm._l((_vm.channelsList),function(item){return _c('van-tab',{key:item.id,attrs:{\"title\":item.name,\"name\":item.id}},[_c('ArticleList',{attrs:{\"channelId\":_vm.channelId}})],1)}),1),_c('van-icon',{staticClass:\"moreChannels\",attrs:{\"name\":\"plus\",\"size\":\"0.37333334rem\"},on:{\"click\":function($event){_vm.show = true}}})],1),_c('van-popup',{attrs:{\"get-container\":\"body\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('ChannelEdit',{attrs:{\"userList\":_vm.channelsList,\"unCheckLIst\":_vm.unCheckChannelList},on:{\"addChannelEv\":_vm.addChannelFn,\"removeChannelEV\":_vm.removeChannelFn,\"closeEv\":_vm.closeFn},model:{value:(_vm.channelId),callback:function ($$v) {_vm.channelId=$$v},expression:\"channelId\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false,\"offset\":\"50\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('ArticleItem',{key:item.art_id,attrs:{\"artObj\":item},on:{\"dislikeEV\":_vm.dislikeFn,\"reportEV\":_vm.reportFn},nativeOn:{\"click\":function($event){return _vm.itemClickFn(item.art_id)}}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 下拉刷新组件 -->\r\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\r\n      <!-- 上拉加载更多组件 -->\r\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\" :immediate-check=\"false\"\r\n        offset=\"50\">\r\n        <!-- 文章列表 -->\r\n        <ArticleItem v-for=\"item in list\" :key=\"item.art_id\" :artObj=\"item\" @dislikeEV=\"dislikeFn\" @reportEV=\"reportFn\"\r\n          @click.native=\"itemClickFn(item.art_id)\">\r\n        </ArticleItem>\r\n      </van-list>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ArticleItem from '../../../components/ArticleItem.vue'\r\nimport { articlesListAPI, dislikeArticle, articleReportsAPI } from '@/api/index'\r\nimport { Notify } from 'vant'\r\n\r\nexport default {\r\n  name: 'ArticleList',\r\n  props: {\r\n    channelId: Number\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      thetime: new Date().getTime(),\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 上拉加载事件方法\r\n    async getArticleList() {\r\n      // 负责拿文章列表数据\r\n      const res = await articlesListAPI({\r\n        channel_id: this.channelId,\r\n        timestamp: this.thetime\r\n      })\r\n\r\n      this.thetime = res.data.data.pre_timestamp // 保存下一页数据的时间(做分页用)\r\n      this.list = [...this.list, ...res.data.data.results]\r\n      // 等待网络请求结果后\r\n      this.loading = false // 底部加载更多状态\r\n\r\n      // 如果无数据\r\n      if (res.data.data.pre_timestamp === null) {\r\n        this.finished = true // 告诉list组件直接底部显示没有更多数据\r\n      }\r\n    },\r\n    // 上拉加载\r\n    onLoad() {\r\n      if (this.list.length === 0) {\r\n        this.loading = false\r\n        return\r\n      }\r\n      // 有第一页数据以后, onLoad才再发请求\r\n      if (this.list.length > 0) {\r\n        this.getArticleList()\r\n      }\r\n    },\r\n    // 下拉刷新\r\n    async onRefresh() {\r\n      // 刷新清空原文章列表数组\r\n      this.thetime = new Date().getTime()\r\n      const { data: res } = await articlesListAPI({\r\n        channel_id: this.channelId,\r\n        timestamp: this.thetime\r\n      })\r\n      this.thetime = res.data.pre_timestamp\r\n      this.list = res.data.results\r\n      this.isLoading = false\r\n    },\r\n    // 自定义不感兴趣文章事件的触发方法\r\n    async dislikeFn(artId) {\r\n      try {\r\n        const { data: res } = await dislikeArticle({ artId })\r\n        console.log(res)\r\n        Notify({ type: 'success', message: '反馈成功' })\r\n      } catch (err) {\r\n      }\r\n    },\r\n    // 反馈垃圾内容的方法\r\n    async reportFn(artId, value) {\r\n      try {\r\n        const { data: res } = await articleReportsAPI({ artId, value })\r\n        console.log(res)\r\n        Notify({ type: 'success', message: '举报成功' })\r\n      } catch (err) {\r\n      }\r\n    },\r\n    // 文章组件点击事件\r\n    itemClickFn(id) {\r\n      this.$router.push({\r\n        path: `/detail?art_id=${id}`\r\n      })\r\n    }\r\n  },\r\n  components: {\r\n    ArticleItem\r\n  },\r\n  created() {\r\n    this.getArticleList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=2bf9eaa0&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"频道管理\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"0.37333334rem\",\"color\":\"white\"},on:{\"click\":_vm.closeFn}})]},proxy:true}])}),_c('div',{staticClass:\"my-channel-box\"},[_c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"我的频道 \"),_c('span',{staticClass:\"small-title\"},[_vm._v(\" \"+_vm._s(_vm.isEdit ? '点击删除频道' : '点击进入频道')+\" \")])]),_c('span',{on:{\"click\":function($event){_vm.isEdit = !_vm.isEdit}}},[_vm._v(_vm._s(_vm.isEdit ? '完成' : '编辑'))])]),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.userList),function(item){return _c('van-col',{key:item.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.removeChannel(item)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(\" \"+_vm._s(item.name)+\" \"),(_vm.isEdit && item.name !== '推荐')?_c('van-badge',{staticClass:\"cross-badge\",attrs:{\"color\":\"transparent\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('van-icon',{staticClass:\"badge-icon\",attrs:{\"name\":\"cross\",\"color\":\"#cfcfcf\",\"size\":\"0.32rem\"}})]},proxy:true}],null,true)}):_vm._e()],1)])}),1)],1),_c('div',{staticClass:\"more-channel-box\"},[_vm._m(0),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.unCheckLIst),function(item){return _c('van-col',{key:item.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.moreFn(item)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(_vm._s(item.name))])])}),1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"点击添加更多频道：\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 弹出层的头部区域 -->\r\n    <van-nav-bar title=\"频道管理\">\r\n      <template #right>\r\n        <van-icon name=\"cross\" size=\"0.37333334rem\" color=\"white\" @click=\"closeFn\" />\r\n      </template>\r\n    </van-nav-bar>\r\n    <!-- 我的频道 -->\r\n    <div class=\"my-channel-box\">\r\n      <div class=\"channel-title\">\r\n        <span>我的频道\r\n          <span class=\"small-title\">\r\n            {{ isEdit ? '点击删除频道' : '点击进入频道' }}\r\n          </span>\r\n        </span>\r\n        <span @click=\"isEdit = !isEdit\">{{ isEdit ? '完成' : '编辑' }}</span>\r\n      </div>\r\n      <!-- 我的频道列表 -->\r\n      <van-row type=\"flex\">\r\n        <van-col span=\"6\" v-for=\"item in userList\" :key=\"item.id\" @click=\"removeChannel(item)\">\r\n          <div class=\"channel-item van-hairline--surround\">\r\n            {{ item.name }}\r\n            <!-- 删除的徽标 -->\r\n            <van-badge color=\"transparent\" class=\"cross-badge\" v-if=\"isEdit && item.name !== '推荐'\">\r\n              <template #content>\r\n                <van-icon name=\"cross\" class=\"badge-icon\" color=\"#cfcfcf\" size=\"0.32rem\" />\r\n              </template>\r\n            </van-badge>\r\n          </div>\r\n        </van-col>\r\n      </van-row>\r\n    </div>\r\n\r\n    <!-- 更多频道 -->\r\n    <div class=\"more-channel-box\">\r\n      <div class=\"channel-title\">\r\n        <span>点击添加更多频道：</span>\r\n      </div>\r\n      <!-- 更多频道列表 -->\r\n      <van-row type=\"flex\">\r\n        <van-col span=\"6\" v-for=\"item in unCheckLIst\" :key=\"item.id\" @click=\"moreFn(item)\">\r\n          <div class=\"channel-item van-hairline--surround\">{{ item.name }}</div>\r\n        </van-col>\r\n      </van-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'ChannelEdit',\r\n  // 接收来自index.vue传来的频道列表参数\r\n  props: {\r\n    userList: { type: Array },\r\n    unCheckLIst: { type: Array }\r\n  },\r\n  data() {\r\n    return {\r\n      // 频道编辑的状态\r\n      isEdit: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 更多频道的点击事件\r\n    moreFn(channelObj) {\r\n      // 先判断用户是否先点击了编辑，点击后才能添加\r\n      if (this.isEdit) {\r\n        // 然后把要添加的频道的数据传出去\r\n        this.$emit('addChannelEv', channelObj)\r\n      }\r\n    },\r\n    // 移除频道方法\r\n    removeChannel(channelObj) {\r\n      // 先判断是否处于编辑状态，是就移除频道的事件\r\n      if (this.isEdit) {\r\n        this.$emit('removeChannelEV', channelObj)\r\n      } else {\r\n        // 否则，点击谁就关闭该弹出层，并且外面显示正在浏览的频道就是该频道\r\n        this.$emit('input', channelObj.id)\r\n        this.closeFn()\r\n      }\r\n    },\r\n    // 关闭频道弹出层按钮方法\r\n    closeFn() {\r\n      this.isEdit = false\r\n      // 点击触发自定义的关闭事件，index.vue里再处理事件触发的方法\r\n      this.$emit('closeEv')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n   <style scoped lang=\"less\">\r\n.van-popup,\r\n.popup-container {\r\n  background-color: transparent;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.popup-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.pop-header {\r\n  height: 90px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  position: relative;\r\n\r\n  .title {\r\n    width: 100%;\r\n    position: absolute;\r\n    bottom: 15px;\r\n  }\r\n}\r\n\r\n.pop-body {\r\n  flex: 1;\r\n  overflow: scroll;\r\n  padding: 8px;\r\n  background-color: white;\r\n}\r\n\r\n.my-channel-box,\r\n.more-channel-box {\r\n  .channel-title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    font-size: 14px;\r\n    line-height: 28px;\r\n    padding: 0 6px;\r\n  }\r\n}\r\n\r\n.channel-item {\r\n  font-size: 12px;\r\n  text-align: center;\r\n  line-height: 36px;\r\n  background-color: #fafafa;\r\n  margin: 5px;\r\n}\r\n\r\n/*删除的微标 */\r\n.cross-badge {\r\n  position: absolute;\r\n  right: -3px;\r\n  top: 0;\r\n  border: none;\r\n}\r\n\r\n/*提示文字 */\r\n.small-title {\r\n  font-size: 10px;\r\n  color: gray;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChannelEdit.vue?vue&type=template&id=31a6cef4&scoped=true&\"\nimport script from \"./ChannelEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ChannelEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChannelEdit.vue?vue&type=style&index=0&id=31a6cef4&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31a6cef4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <!-- 头部标题 -->\r\n    <div>\r\n      <van-nav-bar fixed>\r\n        <template #left>\r\n          <img src=\"@/assets/logo.png\" alt=\"\" class=\"logo\" />\r\n        </template>\r\n        <template #right>\r\n          <van-icon name=\"search\" size=\"0.54rem\" color=\"#fff\" @click=\"moveSearchFn\" />\r\n        </template>\r\n      </van-nav-bar>\r\n    </div>\r\n\r\n    <!-- 内容区域 -->\r\n    <div class=\"main\">\r\n      <!-- tab导航 -->\r\n      <van-tabs v-model=\"channelId\" animated sticky offset-top=\"0.46rem\">\r\n        <van-tab v-for=\"item in channelsList\" :key=\"item.id\" :title=\"item.name\" :name=\"item.id\">\r\n          <!-- 内容列表组件 -->\r\n          <ArticleList :channelId=\"channelId\"></ArticleList>\r\n        </van-tab>\r\n      </van-tabs>\r\n\r\n      <!-- 添加图标 -->\r\n      <van-icon name=\"plus\" size=\"0.37333334rem\" class=\"moreChannels\" @click=\"show = true\" />\r\n    </div>\r\n\r\n    <!-- 频道点击+号弹出层 -->\r\n    <van-popup v-model=\"show\" get-container=\"body\">\r\n      <!-- 弹出的内容组件 -->\r\n      <ChannelEdit v-model=\"channelId\" :userList=\"channelsList\" :unCheckLIst=\"unCheckChannelList\"\r\n        @addChannelEv=\"addChannelFn\" @removeChannelEV=\"removeChannelFn\" @closeEv=\"closeFn\">\r\n      </ChannelEdit>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入获取用户列表、文章获取的API接口和所有频道的API和更新频道的接口\r\nimport { getUserChannelsAPI, getAllChannelsAPI, updateChannelAPI } from '@/api/index'\r\n// 导入ArticleList组件渲染到导航栏下的内容区域\r\nimport ArticleList from './components/ArticleList.vue'\r\n\r\nimport ChannelEdit from './ChannelEdit.vue'\r\n\r\nexport default {\r\n  name: 'Home',\r\n  components: {\r\n    ArticleList,\r\n    ChannelEdit\r\n  },\r\n  data() {\r\n    return {\r\n      // channelId值双向绑定对应的频道id\r\n      channelId: 0,\r\n      channelsList: [], // 用户已选展示在首页的频道列表\r\n      allChannelList: [], // 所有频道列表\r\n      show: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 子组件自定义的添加频道事假触发的方法\r\n    async addChannelFn(channelObj) {\r\n      this.channelsList.push(channelObj)\r\n\r\n      // 调用更新频道的API\r\n      await updateChannelAPI({\r\n        channels: this.channelsList\r\n      })\r\n    },\r\n    // 子组件自定义的移除频道事件触发的方法\r\n    async removeChannelFn(channelObj) {\r\n      this.channelsList = this.channelsList.filter(channel => {\r\n        if (channelObj.name === '推荐') {\r\n          // 不能删除推荐的频道\r\n          return true\r\n        }\r\n        return channelObj.id !== channel.id\r\n      })\r\n      await updateChannelAPI({\r\n        channels: this.channelsList\r\n      })\r\n    },\r\n    // 触发关闭频道选择面板的方法\r\n    closeFn() {\r\n      this.show = false\r\n    },\r\n    // 放大镜点击事件,跳转到search路由对应的组件\r\n    moveSearchFn() {\r\n      this.$router.push('/search')\r\n    }\r\n  },\r\n  computed: {\r\n    // 没有选择的频道\r\n    unCheckChannelList() {\r\n      // 剔除所有频道中存在的用户已选的频道，把结果放到新数组中\r\n      const unCheckChannelList = this.allChannelList.filter(bigObj => {\r\n        // findIndex方法遍历用户频道数组\r\n        const index = this.channelsList.findIndex(smallObj => {\r\n          // findIndex遍历数组，查找满足return的条件，真就返回该值的索引，否则返回-1\r\n          return smallObj.id === bigObj.id\r\n        })\r\n        if (index > -1) {\r\n          // >-1即所有频道中该频道存在于用户频道中，返回false，filter不会把该值放在新数组中\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      })\r\n      // unCheckChannelList方法最终返回的数组\r\n      return unCheckChannelList\r\n    }\r\n  },\r\n  async created() {\r\n    // 请求用户已选频道列表数据\r\n    const { data: res } = await getUserChannelsAPI()\r\n    this.channelsList = res.data.channels\r\n\r\n    // 所有频道数据请求\r\n    const { data: res2 } = await getAllChannelsAPI()\r\n    this.allChannelList = res2.data.channels\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.logo {\r\n  width: 100px;\r\n  height: 30px;\r\n}\r\n\r\n.main {\r\n  padding-top: 46px;\r\n}\r\n\r\n/deep/ .van-tabs__wrap {\r\n  padding-right: 30px;\r\n  background-color: #fff;\r\n}\r\n\r\n// 设置小图标的样式\r\n.moreChannels {\r\n  position: fixed;\r\n  top: 62px;\r\n  right: 8px;\r\n  z-index: 999;\r\n}\r\n\r\n// 频道添加出现的面板样式\r\n.van-popup {\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a4777d12&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a4777d12&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a4777d12\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","staticClass","proxy","on","moveSearchFn","model","value","callback","$$v","channelId","expression","_l","item","id","name","$event","show","channelsList","unCheckChannelList","addChannelFn","removeChannelFn","closeFn","staticRenderFns","onRefresh","isLoading","finished","onLoad","loading","art_id","dislikeFn","reportFn","nativeOn","itemClickFn","props","data","list","thetime","methods","channel_id","timestamp","artId","console","type","message","path","components","ArticleItem","created","component","_v","_s","isEdit","removeChannel","_e","_m","moreFn","userList","unCheckLIst","ArticleList","ChannelEdit","allChannelList","channels","computed"],"sourceRoot":""}