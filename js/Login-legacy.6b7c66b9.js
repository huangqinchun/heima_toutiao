"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[438],{6674:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-nav-bar",{attrs:{title:"黑马头条-登录"}}),a("div",[a("van-form",{on:{submit:e.onSubmit}},[a("van-cell-group",{attrs:{inset:""}},[a("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"请输入11位手机号",required:"",rules:[{required:!0,message:"请填写11位正确的手机号",pattern:/^1[3-9]\d{9}$/}]},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}}),a("van-field",{attrs:{type:"password",name:"code",label:"密码",placeholder:"密码",required:"",rules:[{required:!0,message:"请填写6位密码",pattern:/^\d{6}$/}]},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}})],1),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",loading:e.isLoading,disabled:e.isLoading,"loading-text":"正在登录...",type:"primary","native-type":"submit"}},[e._v(" 登录 ")])],1)],1)],1)],1)},n=[],s=(a(5642),a(8398)),o=a(6198),i=(a(8975),a(4916),a(5306),a(693)),u=a(4224),l={name:"Login",data:function(){return{user:{mobile:"18482638909",code:"246810"},isLoading:!1}},methods:{onSubmit:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,(0,i.UO)(t.user);case 4:a=e.sent,r=a.data,console.log(r),(0,s.Z)({type:"success",message:"登录成功"}),(0,u.o4)(r.data.token),localStorage.setItem("refresh_token",r.data.refresh_token),t.$router.replace({path:"/layout/home"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),(0,s.Z)({type:"danger",message:"账号或密码错误"});case 16:t.isLoading=!1;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))()}}},c=l,d=a(1001),m=(0,d.Z)(c,r,n,!1,null,"3da94833",null),p=m.exports}}]);
//# sourceMappingURL=Login-legacy.6b7c66b9.js.map