{"version":3,"file":"js/Login.52f6bc72.js","mappings":"0JAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,aAAaF,EAAG,MAAM,CAACA,EAAG,WAAW,CAACG,GAAG,CAAC,OAASP,EAAIQ,WAAW,CAACJ,EAAG,iBAAiB,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,MAAQ,MAAM,YAAc,YAAY,SAAW,GAAG,MAAQ,CAAC,CAAEG,UAAU,EAAMC,QAAS,eAAgBC,QAAS,mBAAoBC,MAAM,CAACC,MAAOb,EAAIc,KAAW,OAAEC,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIc,KAAM,SAAUE,IAAME,WAAW,iBAAiBd,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAW,KAAO,OAAO,MAAQ,KAAK,YAAc,KAAK,SAAW,GAAG,MAAQ,CAAC,CAAEG,UAAU,EAAMC,QAAS,UAAWC,QAAS,aAAcC,MAAM,CAACC,MAAOb,EAAIc,KAAS,KAAEC,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIc,KAAM,OAAQE,IAAME,WAAW,gBAAgB,GAAGd,EAAG,MAAM,CAACe,YAAY,CAAC,OAAS,SAAS,CAACf,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,QAAUN,EAAIoB,UAAU,SAAWpB,EAAIoB,UAAU,eAAe,UAAU,KAAO,UAAU,cAAc,WAAW,CAACpB,EAAIqB,GAAG,WAAW,IAAI,IAAI,IAAI,IACpiCC,EAAkB,G,uCC8BtB,GACAC,KAAAA,QACAC,OACA,OACAV,KAAAA,CACAW,OAAAA,cACAC,KAAAA,UAGAN,WAAAA,IAGAO,QAAAA,CAEA,kBAEA,kBAGA,IACA,MAAAH,KAAAA,SAAA,mBACAI,QAAAA,IAAAA,IACA,QAAAC,KAAAA,UAAAnB,QAAAA,UAEAoB,EAAAA,EAAAA,IAAAA,EAAAA,KAAAA,OAEAC,aAAAA,QAAAA,gBAAAA,EAAAA,KAAAA,eAGA,sBAAAC,KAAAA,iBACA,UAEA,QAAAH,KAAAA,SAAAnB,QAAAA,YAIA,qBCnE0Q,I,UCOtQuB,GAAY,OACd,EACAlC,EACAuB,GACA,EACA,KACA,WACA,MAIF,EAAeW,EAAiB","sources":["webpack://toutiao/./src/views/Login/Login.vue?e90d","webpack://toutiao/src/views/Login/Login.vue","webpack://toutiao/./src/views/Login/Login.vue?9532","webpack://toutiao/./src/views/Login/Login.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"黑马头条-登录\"}}),_c('div',[_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-cell-group',{attrs:{\"inset\":\"\"}},[_c('van-field',{attrs:{\"name\":\"mobile\",\"label\":\"手机号\",\"placeholder\":\"请输入11位手机号\",\"required\":\"\",\"rules\":[{ required: true, message: '请填写11位正确的手机号', pattern: /^1[3-9]\\d{9}$/ }]},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"code\",\"label\":\"密码\",\"placeholder\":\"密码\",\"required\":\"\",\"rules\":[{ required: true, message: '请填写6位密码', pattern: /^\\d{6}$/ }]},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}})],1),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"loading\":_vm.isLoading,\"disabled\":_vm.isLoading,\"loading-text\":\"正在登录...\",\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\" 登录 \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 顶部标题 -->\r\n    <van-nav-bar title=\"黑马头条-登录\" />\r\n    <!-- 登录表单的vant组件 -->\r\n    <div>\r\n      <van-form @submit=\"onSubmit\">\r\n        <van-cell-group inset>\r\n          <van-field v-model=\"user.mobile\" name=\"mobile\" label=\"手机号\" placeholder=\"请输入11位手机号\" required\r\n            :rules=\"[{ required: true, message: '请填写11位正确的手机号', pattern: /^1[3-9]\\d{9}$/ }]\" />\r\n          <van-field v-model=\"user.code\" type=\"password\" name=\"code\" label=\"密码\" placeholder=\"密码\" required\r\n            :rules=\"[{ required: true, message: '请填写6位密码', pattern: /^\\d{6}$/ }]\" />\r\n        </van-cell-group>\r\n        <div style=\"margin: 16px\">\r\n          <van-button round block :loading=\"isLoading\" :disabled=\"isLoading\" loading-text=\"正在登录...\" type=\"primary\"\r\n            native-type=\"submit\"> 登录\r\n          </van-button>\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 按需导入登录接口\r\nimport { loginAPI } from '@/api/index'\r\n// 调用vant反馈的函数组件\r\nimport { Notify } from 'vant'\r\n// 导入封装的token处理模块\r\nimport { setToken } from '@/utils/token'\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      user: {\r\n        mobile: '18482638909', // 手机号\r\n        code: '246810'// 密码\r\n      },\r\n      // loading属性值isLoading初始设为false(表示目前未加载，登录按钮加载效果不会出来，后续按照需求将其设为true即可)\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 提交表单的方法,value参数可以接收表单提交的数据\r\n    async onSubmit(values) {\r\n      // 点击提交按钮后，isLoading设为true，按钮显示登录中，同时禁用按钮\r\n      this.isLoading = true\r\n\r\n      // 发起axios请求，并把请求数据传过去（并且捕获错误）\r\n      try {\r\n        const { data: res } = await loginAPI(this.user)\r\n        console.log(res)\r\n        Notify({ type: 'success', message: '登录成功' })\r\n        // 调用保存token的方法，把后端返回的token值传过去\r\n        setToken(res.data.token)\r\n        // 保存refresh——token\r\n        localStorage.setItem('refresh_token', res.data.refresh_token)\r\n\r\n        // 最后进行跳转\r\n        this.$router.replace({ path: '/layout/home' })\r\n      } catch (err) {\r\n        // 调用vant组件的Notify错误反馈函数\r\n        Notify({ type: 'danger', message: '账号或密码错误' })\r\n      }\r\n\r\n      // 网络请求完成无论成功还是错误，都把状态关掉,让表单恢复正常使用\r\n      this.isLoading = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=3da94833&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3da94833\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onSubmit","required","message","pattern","model","value","user","callback","$$v","$set","expression","staticStyle","isLoading","_v","staticRenderFns","name","data","mobile","code","methods","console","type","setToken","localStorage","path","component"],"sourceRoot":""}