"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[288],{8435:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"search-header"},[e("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),e("van-search",{directives:[{name:"selfFocus",rawName:"v-selfFocus"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.iptFn,search:function(s){return t.searchFn(t.kw)}},model:{value:t.kw,callback:function(s){t.kw="string"===typeof s?s.trim():s},expression:"kw"}})],1),0!==t.kw.length?e("div",{staticClass:"sugg-list"},t._l(t.suggestList,(function(s,i){return e("div",{key:i,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(s,t.kw))},on:{click:function(e){return t.searchFn(s)}}})})),0):e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.clearFn}})]},proxy:!0}])}),e("div",{staticClass:"history-list"},t._l(t.history,(function(s,i){return e("span",{key:i,staticClass:"history-item",on:{click:function(e){return t.searchFn(s)}}},[t._v(t._s(s))])})),0)],1)])},r=[],n=e(693),a={name:"Search",data(){return{kw:"",timer:null,suggestList:[],history:JSON.parse(localStorage.getItem("historySearch"))||[]}},methods:{iptFn(){clearTimeout(this.timer),0===this.kw.length?this.suggestList=[]:this.timer=setTimeout((async()=>{const{data:t}=await(0,n.Bq)({kw:this.kw});this.suggestList=t.data.options}),300)},lightFn(t,s){const e=new RegExp(s,"ig");return t?.replace(e,(t=>`<span style="color:red;font-weight:bold">${t}</span>`))},searchFn(t){t?.length>0&&(-1===this.history?.indexOf(t)&&(this.history.push(t),localStorage.setItem("historySearch",JSON.stringify(this.history))),this.$router.push(`/search_result/${t}`))},clearFn(){localStorage.removeItem("historySearch"),this.history=[]}}},o=a,c=e(1001),l=(0,c.Z)(o,i,r,!1,null,"686f2931",null),h=l.exports}}]);
//# sourceMappingURL=Search.a626337b.js.map